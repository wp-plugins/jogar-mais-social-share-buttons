window.ssbPrefix="ssb-share",function(a){a.prototype.byElement=function(a){return this.find('[data-element="'+a+'"]')},a.prototype.byData=function(a){return this.find("[data-"+a+"]")},a.prototype.byAction=function(a){return this.find('[data-action="'+a+'"]')},a.prototype.byComponent=function(a){return this.find('[data-component="'+a+'"]')},a.prototype.isExist=function(a,b){var c=this.find(a);return c.length&&"function"==typeof b&&b.call(null,c,this),c.length},a.prototype.compileHandlebars=function(){return Handlebars.compile(this.html())},a.prototype.fadeOutRemove=function(a){this.fadeOut(a,function(){this.remove()}.bind(this))},a.prototype.isEmptyValue=function(){return!a.trim(this.val())},a.prototype.valInt=function(){return parseInt(this.val(),10)},a.prototype.addClassReFlow=function(a){this.css("display","block"),this[0].offsetWidth,this.addClass(a)},a.prototype.getUrlAjax=function(){return(window.PluginGlobalVars||{}).urlAjax}}(jQuery),function(a){"use strict";var b=function(a){this.container=a,this.init()};b.prototype.init=function(){this.addEventListener()},b.prototype.addEventListener=function(){var a=this.container.byAction("open-popup");a.on("click",this._onClick.bind(this))},b.prototype._onClick=function(a){a.preventDefault();var b=jQuery(a.currentTarget),c="685",d="500";this.popupCenter(b.data("attr-url"),"Compartilhar",c,d)},b.prototype.popupCenter=function(a,b,c,d){var e,f;return c=c||screen.width,d=d||screen.height,e=.5*screen.width-.5*c,f=.5*screen.height-.5*d,window.open(a,b,"menubar=no,toolbar=no,status=no,width="+c+",height="+d+",toolbar=no,left="+e+",top="+f)},a.Application=b}(window),function(a){"use strict";var b={},c=function(a){this.container=a,this.reference=this.container.data("attr-reference"),this.nonce=this.container.data("attr-nonce"),this.url=this.container.data("element-url"),this.facebook=this.container.byElement("facebook"),this.twitter=this.container.byElement("twitter"),this.google=this.container.byElement("google-plus"),this.pinterest=this.container.byElement("pinterest"),this.linkedin=this.container.byElement("linkedin"),this.totalShare=this.container.byElement("total-share"),this.totalCounter=0,this.facebookCounter=0,this.twitterCounter=0,this.googleCounter=0,this.linkedinCounter=0,this.pinterestCounter=0,this.max=5,this.doubleMax=10,this.init()};c.prototype.init=function(){this.request(),this.addEventListeners()},c.prototype.addEventListeners=function(){var a=this.container.byAction("open-popup");a.on("click",this._onClickSendRequest.bind(this))},c.prototype._onClickSendRequest=function(a){this.sendRequest()},c.prototype.request=function(){var a=[{reference:"facebookCounter",element:"facebook",url:"http://graph.facebook.com/?id="+this.url},{reference:"twitterCounter",element:"twitter",url:"http://cdn.api.twitter.com/1/urls/count.json?url="+this.url},{reference:"googleCounter",element:"google",url:this.container.getUrlAjax(),data:this.getParamsGoogle()},{reference:"linkedinCounter",element:"linkedin",url:"http://www.linkedin.com/countserv/count/share?url="+this.url},{reference:"pinterestCounter",element:"pinterest",url:"http://api.pinterest.com/v1/urls/count.json?url="+this.url}];this._eachAjaxSocial(a)},c.prototype._eachAjaxSocial=function(a){a.forEach(this._iterateItems.bind(this))},c.prototype._iterateItems=function(a){this.doubleMax-=1,b[a.element]&&this.doubleMax||(this._getJSON(a),this._setNewRequest(a))},c.prototype._getJSON=function(a){var b=jQuery.extend({data:{},dataType:"jsonp",cache:!1},a),c=jQuery.ajax(b);c.done(jQuery.proxy(this,"_done",a)),c.fail(jQuery.proxy(this,"_fail",a))},c.prototype._done=function(a,b){var c=this.getNumberByData(b);this[a.reference]=c,this.max-=1,this.totalCounter+=parseFloat(c),this[a.element].text(c),0===this.max&&this.totalShare.text(this.totalCounter)},c.prototype._fail=function(a,b,c){this[a.reference]=0,this[a.element].text(0)},c.prototype._setNewRequest=function(a){b[a.element]=!0},c.prototype.getNumberByData=function(a){return parseFloat(a.shares)+parseFloat(a.comments)||a.shares||a.count||0},c.prototype.getParamsGoogle=function(){return{action:"get_plus_google",url:this.url}},c.prototype.sendRequest=function(){jQuery.ajax({method:"POST",url:this.container.getUrlAjax(),data:{action:"global_counts_social_share",reference:this.reference,count_facebook:this.facebookCounter,count_twitter:this.twitterCounter,count_google:this.googleCounter,count_linkedin:this.linkedinCounter,count_pinterest:this.pinterestCounter,nonce:this.nonce}})},a.CounterSocialShare=c}(window),jQuery(function(a){"use strict";var b=a("body"),c=b.byComponent(window.ssbPrefix);c.length&&(new Application(b),new CounterSocialShare(c))});